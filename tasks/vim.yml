---

- hosts: localhost
  connection: local
  vars_prompt:
    - name: "hateblo_api_key"
      prompt: "Please enter your hateblo-apikey. see http://blog.hatena.ne.jp/assout/assout.hatenablog.com/config/detail"
  tasks:
    - git: repo=git@github.com:Shougo/neobundle.vim version=master dest=~/.vim/bundle/neobundle.vim
    - command: ~/.vim/bundle/neobundle.vim/bin/neoinstall

    - file: path=~/.cache/hateblo/blog state=directory
    - stat: path="~/.vimrc.local"
      register: has_localrc
    - shell: echo "let g:hateblo_api_key='{{ hateblo_api_key }}'" > ~/.vimrc.local
      when: has_localrc.stat.exists == False

    - stat: path="~/.vim/dict/gene.txt"
      register: has_gene
    - get_url: url="http://www.namazu.org/~tsuchiya/sdic/data/gene95.tar.gz" dest=/tmp
      when: has_gene.stat.exists == False
    - file: path=~/.vim/dict state=directory
      when: has_gene.stat.exists == False
    - unarchive: src=/tmp/gene95.tar.gz dest=~/.vim/dict/
      when: has_gene.stat.exists == False
    - shell: nkf -Sw -Lu -m0 --in-place ~/.vim/dict/gene.txt
      when: has_gene.stat.exists == False

